"use strict";(()=>{var e={};e.id=100,e.ids=[100],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},3139:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>f,patchFetch:()=>y,requestAsyncStorage:()=>d,routeModule:()=>u,serverHooks:()=>m,staticGenerationAsyncStorage:()=>g});var r={};a.r(r),a.d(r,{GET:()=>p,dynamic:()=>l});var i=a(9303),s=a(8716),n=a(670),o=a(7070),c=a(108);let l="force-dynamic";function p(){try{var e=c.getAgentState();return o.NextResponse.json({agents:e,timestamp:new Date().toISOString()})}catch(e){return o.NextResponse.json({error:e instanceof Error?e.message:"Unknown error"},{status:500})}}let u=new i.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/v3/agents/route",pathname:"/api/v3/agents",filename:"route",bundlePath:"app/api/v3/agents/route"},resolvedPagePath:"/home/ubuntu/.openclaw/workspace/blindfold-v3/src/app/api/v3/agents/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:g,serverHooks:m}=u,f="/api/v3/agents/route";function y(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:g})}},108:(e,t,a)=>{let r=a(7147),i=a(1017),s=i.join(process.cwd(),"src/lib/agents"),n=i.join(process.cwd(),"data"),o=i.join(n,"proposals.json"),c=i.join(n,"tasks.json"),l=i.join(n,"agent-messages.json");i.join(n,"agents-state.json"),[n].forEach(e=>{r.existsSync(e)||r.mkdirSync(e,{recursive:!0})});class p{constructor(e,t,a,r,i=[]){this.id=e.toLowerCase().replace(/\s+/g,"_"),this.name=e,this.role=t,this.description=a,this.color=r,this.capabilities=i,this.status="idle",this.currentTask=null,this.messages=[],this.lastActive=new Date().toISOString(),this.goals=[],this.suggestions=[]}async think(e){return this.status="thinking",this.lastActive=new Date().toISOString(),await new Promise(e=>setTimeout(e,1e3)),{thought:e,timestamp:new Date().toISOString(),agent:this.name}}async propose(e,t,a,i="medium"){let s={id:"prop_"+Date.now(),agent:this.name,agentId:this.id,task:e,reason:t,expectedOutcome:a,priority:i,status:"pending",createdAt:new Date().toISOString(),votes:[],dependencies:[]};return function(e){let t=[];try{r.existsSync(o)&&(t=JSON.parse(r.readFileSync(o,"utf-8")))}catch(e){}t.unshift(e),r.writeFileSync(o,JSON.stringify(t,null,2))}(s),this.suggestions.push(s.id),g({from:this.name,type:"proposal",content:`He propuesto: ${e}`,proposalId:s.id}),s}async collaborateWith(e,t){return this.status="collaborating",g({from:this.name,to:e,type:"collaboration_request",content:`\xbfPodemos trabajar juntos en: ${t}?`,task:t}),{status:"sent",to:e}}async giveFeedback(e,t,a,i){let s={id:"fb_"+Date.now(),from:this.name,to:e,aboutTask:t,feedback:a,rating:i,timestamp:new Date().toISOString()};return function(e){let t=[];try{r.existsSync(l)&&(t=JSON.parse(r.readFileSync(l,"utf-8")).feedbacks||[])}catch(e){}t.unshift(e);let a={feedbacks:t,messages:[],updatedAt:new Date().toISOString()};try{let e=JSON.parse(r.readFileSync(l,"utf-8"));a.messages=e.messages||[]}catch(e){}r.writeFileSync(l,JSON.stringify(a,null,2))}(s),g({from:this.name,to:e,type:"feedback",content:a,rating:i}),s}}let u={};function d(){let e=r.readdirSync(s).filter(e=>e.endsWith(".md")),t={Orchestrator:{role:"AI Orchestrator",desc:"Coordina m\xfaltiples agentes para tareas complejas",color:"#ff3366",capabilities:["coordination","planning","delegation"]},"Frontend Specialist":{role:"Frontend Developer",desc:"Experto en React, Vue y frameworks web modernos",color:"#00d4ff",capabilities:["react","vue","css","ui_ux"]},"Backend Specialist":{role:"Backend Developer",desc:"Desarrollo de APIs y servidor",color:"#00d4ff",capabilities:["node","python","apis","databases"]},"Database Architect":{role:"Database Designer",desc:"Dise\xf1o y optimizaci\xf3n de bases de datos",color:"#10b981",capabilities:["sql","nosql","optimization","schema"]},"Devops Engineer":{role:"DevOps Specialist",desc:"CI/CD e infraestructura",color:"#f59e0b",capabilities:["docker","kubernetes","ci_cd","cloud"]},"Penetration Tester":{role:"Security Expert",desc:"Testing de seguridad",color:"#ff3366",capabilities:["security","penetration","audit","compliance"]},"Qa Automation Engineer":{role:"QA Engineer",desc:"Testing automatizado",color:"#10b981",capabilities:["testing","automation","quality","coverage"]},"Code Archaeologist":{role:"Code Analyst",desc:"An\xe1lisis de c\xf3digo legacy",color:"#a855f7",capabilities:["refactoring","legacy","analysis","documentation"]},"Performance Optimizer":{role:"Performance Engineer",desc:"Optimizaci\xf3n de rendimiento",color:"#f59e0b",capabilities:["optimization","profiling","caching","speed"]},"Product Owner":{role:"Product Manager",desc:"Estrategia de producto",color:"#ec4899",capabilities:["strategy","requirements","roadmap","prioritization"]},"Project Planner":{role:"Project Manager",desc:"Gesti\xf3n de proyectos",color:"#8b5cf6",capabilities:["planning","tracking","coordination","reporting"]},"Documentation Writer":{role:"Technical Writer",desc:"Documentaci\xf3n t\xe9cnica",color:"#6b7280",capabilities:["documentation","writing","clarity","structure"]},"Mobile Developer":{role:"App Developer",desc:"Desarrollo m\xf3vil",color:"#06b6d4",capabilities:["ios","android","react_native","flutter"]},"Game Developer":{role:"Game Engineer",desc:"Desarrollo de juegos",color:"#22c55e",capabilities:["unity","unreal","game_design","physics"]},Debugger:{role:"Bug Hunter",desc:"Detecci\xf3n de bugs",color:"#ef4444",capabilities:["debugging","troubleshooting","root_cause","fixing"]},"Explorer Agent":{role:"Researcher",desc:"Investigaci\xf3n",color:"#a855f7",capabilities:["research","analysis","summarization","trends"]}};return e.forEach(e=>{let a=e.replace(".md","").replace(/-/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),r=t[a]||{role:"AI Agent",desc:"Agente especializado",color:"#00d4ff",capabilities:[]};u[a]=new p(a,r.role,r.desc,r.color,r.capabilities)}),u}function g(e){let t=[];try{r.existsSync(l)&&(t=JSON.parse(r.readFileSync(l,"utf-8")).messages||[])}catch(e){}t.unshift({...e,timestamp:new Date().toISOString()});let a=[];try{a=JSON.parse(r.readFileSync(l,"utf-8")).feedbacks||[]}catch(e){}r.writeFileSync(l,JSON.stringify({messages:t,feedbacks:a,updatedAt:new Date().toISOString()},null,2))}function m(){try{if(r.existsSync(o))return JSON.parse(r.readFileSync(o,"utf-8"))}catch(e){}return[]}function f(){try{if(r.existsSync(c))return JSON.parse(r.readFileSync(c,"utf-8"))}catch(e){}return[]}function y(e,t,a,r,i){return(d(),u[e])?u[e].propose(t,a,r,i):null}function h(){d();let e=[{agent:"Explorer Agent",task:"Investigar nuevas tendencias en IA",reason:"Es importante mantenernos actualizados con las \xfaltimas tecnolog\xedas",expectedOutcome:"Reporte de tendencias con recomendaciones",priority:"medium"},{agent:"Devops Engineer",task:"Revisar infraestructura de deployment",reason:"Los \xfaltimos deploys tuvieron tiempos de build elevados",expectedOutcome:"Optimizaci\xf3n de pipeline CI/CD",priority:"high"},{agent:"Qa Automation Engineer",task:"Aumentar cobertura de tests en API",reason:"La cobertura actual es del 72%, objetivo es 90%",expectedOutcome:"50+ nuevos tests unitarios",priority:"medium"},{agent:"Code Archaeologist",task:"Refactorizar m\xf3dulo de autenticaci\xf3n",reason:"C\xf3digo legacy con patrones obsoletos",expectedOutcome:"C\xf3digo m\xe1s mantenible y seguro",priority:"low"}];return e.forEach(e=>{y(e.agent,e.task,e.reason,e.expectedOutcome,e.priority)}),e}d(),h(),e.exports={getAgentState:function(){return d(),Object.values(u).map(e=>({id:e.id,name:e.name,role:e.role,status:e.status,color:e.color,capabilities:e.capabilities,currentTask:e.currentTask,lastActive:e.lastActive,suggestionCount:e.suggestions.length}))},getProposals:m,getTasks:f,getMessages:function(){try{if(r.existsSync(l))return JSON.parse(r.readFileSync(l,"utf-8"))}catch(e){}return{messages:[],feedbacks:[]}},createProposal:y,approveProposal:function(e,t,a="user"){let i=m(),s=i.find(t=>t.id===e);if(s){s.status=t?"approved":"rejected",s.approvedBy=a,s.approvedAt=new Date().toISOString(),t&&(function(e){let t=[];try{r.existsSync(c)&&(t=JSON.parse(r.readFileSync(c,"utf-8")))}catch(e){}t.unshift(e),r.writeFileSync(c,JSON.stringify(t,null,2))}({id:"task_"+Date.now(),proposalId:e,agent:s.agent,task:s.task,reason:s.reason,expectedOutcome:s.expectedOutcome,status:"in_progress",startedAt:new Date().toISOString()}),g({from:"system",to:s.agent,type:"task_assigned",content:`Tu propuesta ha sido aprobada: ${s.task}`,proposalId:e}));let n=i.filter(t=>t.id!==e);return r.writeFileSync(o,JSON.stringify([...n,s],null,2)),s}return null},completeTask:function(e,t){let a=f(),i=a.find(t=>t.id===e);return i?(i.status="completed",i.completedAt=new Date().toISOString(),i.result=t,r.writeFileSync(c,JSON.stringify(a,null,2)),g({from:i.agent,type:"task_completed",content:`Tarea completada: ${i.task}`,taskId:e,result:t}),i):null},generateAutoProposals:h,Agent:p}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[948,972],()=>a(3139));module.exports=r})();