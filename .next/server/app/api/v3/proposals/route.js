"use strict";(()=>{var e={};e.id=65,e.ids=[65],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},9277:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>f,patchFetch:()=>y,requestAsyncStorage:()=>d,routeModule:()=>u,serverHooks:()=>m,staticGenerationAsyncStorage:()=>g});var r={};a.r(r),a.d(r,{GET:()=>l,POST:()=>p,dynamic:()=>c});var s=a(9303),o=a(8716),n=a(670),i=a(7070);let c="force-dynamic";function l(){try{var e=[];try{var t=a(7147),r="/home/ubuntu/.openclaw/workspace/blindfold-v3/data/proposals.json";t.existsSync(r)&&(e=JSON.parse(t.readFileSync(r,"utf-8")))}catch(t){e=[]}return i.NextResponse.json({proposals:e,timestamp:new Date().toISOString()})}catch(e){return i.NextResponse.json({error:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function p(e){try{var t=await e.json(),r=t.agentName,s=t.task,o=t.reason||"",n=t.expectedOutcome||"",c=t.priority||"medium";if(!r||!s)return i.NextResponse.json({error:"agentName and task are required"},{status:400});a(7380);var l=a(7147),p={id:"prop_"+Date.now(),agent:r,agentId:r.toLowerCase().replace(/\s+/g,"_"),task:s,reason:o,expectedOutcome:n,priority:c,status:"pending",createdAt:new Date().toISOString(),votes:[],dependencies:[]},u="/home/ubuntu/.openclaw/workspace/blindfold-v3/data/proposals.json",d=[];try{l.existsSync(u)&&(d=JSON.parse(l.readFileSync(u,"utf-8")))}catch(e){}return d.unshift(p),l.writeFileSync(u,JSON.stringify(d,null,2)),i.NextResponse.json({proposal:p,timestamp:new Date().toISOString()})}catch(e){return i.NextResponse.json({error:e instanceof Error?e.message:"Unknown error"},{status:500})}}let u=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/v3/proposals/route",pathname:"/api/v3/proposals",filename:"route",bundlePath:"app/api/v3/proposals/route"},resolvedPagePath:"/home/ubuntu/.openclaw/workspace/blindfold-v3/src/app/api/v3/proposals/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:g,serverHooks:m}=u,f="/api/v3/proposals/route";function y(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:g})}},7380:(e,t,a)=>{let r=a(7147);a(1017);let s="/home/ubuntu/.openclaw/workspace/blindfold-v3/data/proposals.json",o="/home/ubuntu/.openclaw/workspace/blindfold-v3/data/tasks.json",n="/home/ubuntu/.openclaw/workspace/blindfold-v3/data/agent-messages.json";["/home/ubuntu/.openclaw/workspace/blindfold-v3/data"].forEach(e=>{r.existsSync(e)||r.mkdirSync(e,{recursive:!0})});class i{constructor(e,t,a,r,s=[]){this.id=e.toLowerCase().replace(/\s+/g,"_"),this.name=e,this.role=t,this.description=a,this.color=r,this.capabilities=s,this.status="idle",this.currentTask=null,this.messages=[],this.lastActive=new Date().toISOString(),this.goals=[],this.suggestions=[]}async think(e){return this.status="thinking",this.lastActive=new Date().toISOString(),await new Promise(e=>setTimeout(e,1e3)),{thought:e,timestamp:new Date().toISOString(),agent:this.name}}async propose(e,t,a,o="medium"){let n={id:"prop_"+Date.now(),agent:this.name,agentId:this.id,task:e,reason:t,expectedOutcome:a,priority:o,status:"pending",createdAt:new Date().toISOString(),votes:[],dependencies:[]};return function(e){let t=[];try{r.existsSync(s)&&(t=JSON.parse(r.readFileSync(s,"utf-8")))}catch(e){}t.unshift(e),r.writeFileSync(s,JSON.stringify(t,null,2))}(n),this.suggestions.push(n.id),p({from:this.name,type:"proposal",content:`He propuesto: ${e}`,proposalId:n.id}),n}async collaborateWith(e,t){return this.status="collaborating",p({from:this.name,to:e,type:"collaboration_request",content:`\xbfPodemos trabajar juntos en: ${t}?`,task:t}),{status:"sent",to:e}}async giveFeedback(e,t,a,s){let o={id:"fb_"+Date.now(),from:this.name,to:e,aboutTask:t,feedback:a,rating:s,timestamp:new Date().toISOString()};return function(e){let t=[];try{r.existsSync(n)&&(t=JSON.parse(r.readFileSync(n,"utf-8")).feedbacks||[])}catch(e){}t.unshift(e);let a={feedbacks:t,messages:[],updatedAt:new Date().toISOString()};try{let e=JSON.parse(r.readFileSync(n,"utf-8"));a.messages=e.messages||[]}catch(e){}r.writeFileSync(n,JSON.stringify(a,null,2))}(o),p({from:this.name,to:e,type:"feedback",content:a,rating:s}),o}}let c={};function l(){let e=r.readdirSync("/home/ubuntu/.openclaw/workspace/.agent/agents").filter(e=>e.endsWith(".md")),t={Orchestrator:{role:"AI Orchestrator",desc:"Coordina m\xfaltiples agentes para tareas complejas",color:"#ff3366",capabilities:["coordination","planning","delegation"]},"Frontend Specialist":{role:"Frontend Developer",desc:"Experto en React, Vue y frameworks web modernos",color:"#00d4ff",capabilities:["react","vue","css","ui_ux"]},"Backend Specialist":{role:"Backend Developer",desc:"Desarrollo de APIs y servidor",color:"#00d4ff",capabilities:["node","python","apis","databases"]},"Database Architect":{role:"Database Designer",desc:"Dise\xf1o y optimizaci\xf3n de bases de datos",color:"#10b981",capabilities:["sql","nosql","optimization","schema"]},"Devops Engineer":{role:"DevOps Specialist",desc:"CI/CD e infraestructura",color:"#f59e0b",capabilities:["docker","kubernetes","ci_cd","cloud"]},"Penetration Tester":{role:"Security Expert",desc:"Testing de seguridad",color:"#ff3366",capabilities:["security","penetration","audit","compliance"]},"Qa Automation Engineer":{role:"QA Engineer",desc:"Testing automatizado",color:"#10b981",capabilities:["testing","automation","quality","coverage"]},"Code Archaeologist":{role:"Code Analyst",desc:"An\xe1lisis de c\xf3digo legacy",color:"#a855f7",capabilities:["refactoring","legacy","analysis","documentation"]},"Performance Optimizer":{role:"Performance Engineer",desc:"Optimizaci\xf3n de rendimiento",color:"#f59e0b",capabilities:["optimization","profiling","caching","speed"]},"Product Owner":{role:"Product Manager",desc:"Estrategia de producto",color:"#ec4899",capabilities:["strategy","requirements","roadmap","prioritization"]},"Project Planner":{role:"Project Manager",desc:"Gesti\xf3n de proyectos",color:"#8b5cf6",capabilities:["planning","tracking","coordination","reporting"]},"Documentation Writer":{role:"Technical Writer",desc:"Documentaci\xf3n t\xe9cnica",color:"#6b7280",capabilities:["documentation","writing","clarity","structure"]},"Mobile Developer":{role:"App Developer",desc:"Desarrollo m\xf3vil",color:"#06b6d4",capabilities:["ios","android","react_native","flutter"]},"Game Developer":{role:"Game Engineer",desc:"Desarrollo de juegos",color:"#22c55e",capabilities:["unity","unreal","game_design","physics"]},Debugger:{role:"Bug Hunter",desc:"Detecci\xf3n de bugs",color:"#ef4444",capabilities:["debugging","troubleshooting","root_cause","fixing"]},"Explorer Agent":{role:"Researcher",desc:"Investigaci\xf3n",color:"#a855f7",capabilities:["research","analysis","summarization","trends"]}};return e.forEach(e=>{let a=e.replace(".md","").replace(/-/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),r=t[a]||{role:"AI Agent",desc:"Agente especializado",color:"#00d4ff",capabilities:[]};c[a]=new i(a,r.role,r.desc,r.color,r.capabilities)}),c}function p(e){let t=[];try{r.existsSync(n)&&(t=JSON.parse(r.readFileSync(n,"utf-8")).messages||[])}catch(e){}t.unshift({...e,timestamp:new Date().toISOString()});let a=[];try{a=JSON.parse(r.readFileSync(n,"utf-8")).feedbacks||[]}catch(e){}r.writeFileSync(n,JSON.stringify({messages:t,feedbacks:a,updatedAt:new Date().toISOString()},null,2))}function u(){try{if(r.existsSync(s))return JSON.parse(r.readFileSync(s,"utf-8"))}catch(e){}return[]}function d(){try{if(r.existsSync(o))return JSON.parse(r.readFileSync(o,"utf-8"))}catch(e){}return[]}function g(e,t,a,r,s){return(l(),c[e])?c[e].propose(t,a,r,s):null}function m(){l();let e=[{agent:"Explorer Agent",task:"Investigar nuevas tendencias en IA",reason:"Es importante mantenernos actualizados con las \xfaltimas tecnolog\xedas",expectedOutcome:"Reporte de tendencias con recomendaciones",priority:"medium"},{agent:"Devops Engineer",task:"Revisar infraestructura de deployment",reason:"Los \xfaltimos deploys tuvieron tiempos de build elevados",expectedOutcome:"Optimizaci\xf3n de pipeline CI/CD",priority:"high"},{agent:"Qa Automation Engineer",task:"Aumentar cobertura de tests en API",reason:"La cobertura actual es del 72%, objetivo es 90%",expectedOutcome:"50+ nuevos tests unitarios",priority:"medium"},{agent:"Code Archaeologist",task:"Refactorizar m\xf3dulo de autenticaci\xf3n",reason:"C\xf3digo legacy con patrones obsoletos",expectedOutcome:"C\xf3digo m\xe1s mantenible y seguro",priority:"low"}];return e.forEach(e=>{g(e.agent,e.task,e.reason,e.expectedOutcome,e.priority)}),e}l(),m(),e.exports={getAgentState:function(){return l(),Object.values(c).map(e=>({id:e.id,name:e.name,role:e.role,status:e.status,color:e.color,capabilities:e.capabilities,currentTask:e.currentTask,lastActive:e.lastActive,suggestionCount:e.suggestions.length}))},getProposals:u,getTasks:d,getMessages:function(){try{if(r.existsSync(n))return JSON.parse(r.readFileSync(n,"utf-8"))}catch(e){}return{messages:[],feedbacks:[]}},createProposal:g,approveProposal:function(e,t,a="user"){let n=u(),i=n.find(t=>t.id===e);if(i){i.status=t?"approved":"rejected",i.approvedBy=a,i.approvedAt=new Date().toISOString(),t&&(function(e){let t=[];try{r.existsSync(o)&&(t=JSON.parse(r.readFileSync(o,"utf-8")))}catch(e){}t.unshift(e),r.writeFileSync(o,JSON.stringify(t,null,2))}({id:"task_"+Date.now(),proposalId:e,agent:i.agent,task:i.task,reason:i.reason,expectedOutcome:i.expectedOutcome,status:"in_progress",startedAt:new Date().toISOString()}),p({from:"system",to:i.agent,type:"task_assigned",content:`Tu propuesta ha sido aprobada: ${i.task}`,proposalId:e}));let c=n.filter(t=>t.id!==e);return r.writeFileSync(s,JSON.stringify([...c,i],null,2)),i}return null},completeTask:function(e,t){let a=d(),s=a.find(t=>t.id===e);return s?(s.status="completed",s.completedAt=new Date().toISOString(),s.result=t,r.writeFileSync(o,JSON.stringify(a,null,2)),p({from:s.agent,type:"task_completed",content:`Tarea completada: ${s.task}`,taskId:e,result:t}),s):null},generateAutoProposals:m,Agent:i}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[948,972],()=>a(9277));module.exports=r})();